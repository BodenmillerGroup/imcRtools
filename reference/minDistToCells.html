<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Function to calculate minimal distance to cells of interest — minDistToCells • imcRtools</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Function to calculate minimal distance to cells of interest — minDistToCells"><meta property="og:description" content="Function to return the distance of the closest cell of interest
for each cell in the data. In the case of patched/clustered cells negative
distances are returned by default which indicate the distance of the cells
of interest to the closest cell that is not of the type of cells of
interest."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">imcRtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.5.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/imcRtools.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/BodenmillerGroup/imcRtools/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Function to calculate minimal distance to cells of interest</h1>
    <small class="dont-index">Source: <a href="https://github.com/BodenmillerGroup/imcRtools/blob/HEAD/R/minDistToCells.R" class="external-link"><code>R/minDistToCells.R</code></a></small>
    <div class="hidden name"><code>minDistToCells.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to return the distance of the closest cell of interest
for each cell in the data. In the case of patched/clustered cells negative
distances are returned by default which indicate the distance of the cells
of interest to the closest cell that is not of the type of cells of
interest.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">minDistToCells</span><span class="op">(</span></span>
<span>  <span class="va">object</span>,</span>
<span>  <span class="va">x_cells</span>,</span>
<span>  <span class="va">img_id</span>,</span>
<span>  name <span class="op">=</span> <span class="st">"distToCells"</span>,</span>
<span>  coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pos_X"</span>, <span class="st">"Pos_Y"</span><span class="op">)</span>,</span>
<span>  return_neg <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  BPPARAM <span class="op">=</span> <span class="fu">SerialParam</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>object</dt>
<dd><p>a <code>SingleCellExperiment</code> or <code>SpatialExperiment</code>
object</p></dd>


<dt>x_cells</dt>
<dd><p>logical vector of length equal to the number of cells
contained in <code>object</code>. <code>TRUE</code> entries define the cells to which
distances will be calculated.</p></dd>


<dt>img_id</dt>
<dd><p>single character indicating the <code>colData(object)</code> entry
containing the unique image identifiers.</p></dd>


<dt>name</dt>
<dd><p>character specifying the name of the <code>colData</code> entry to safe
the distances in.</p></dd>


<dt>coords</dt>
<dd><p>character vector of length 2 specifying the names of the
<code>colData</code> (for a <code>SingleCellExperiment</code> object) or the
<code>spatialCoords</code> entries of the cells' x and y locations.</p></dd>


<dt>return_neg</dt>
<dd><p>logical indicating whether negative distances are to be
returned for the distances of patched/spatially clustered cells.</p></dd>


<dt>BPPARAM</dt>
<dd><p>a <code><a href="https://rdrr.io/pkg/BiocParallel/man/BiocParallelParam-class.html" class="external-link">BiocParallelParam-class</a></code> object
defining how to parallelize computations.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>returns an object of <code>class(object)</code> containing a new column 
entry to <code>colData(object)[[name]]</code>.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Daniel Schulz (<a href="mailto:daniel.schulz@uzh.ch">daniel.schulz@uzh.ch</a>)</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/BodenmillerGroup/cytomapper" class="external-link">cytomapper</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">pancreasSCE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Build interaction graph</span></span></span>
<span class="r-in"><span><span class="va">pancreasSCE</span> <span class="op">&lt;-</span> <span class="fu"><a href="buildSpatialGraph.html">buildSpatialGraph</a></span><span class="op">(</span><span class="va">pancreasSCE</span>, img_id <span class="op">=</span> <span class="st">"ImageNb"</span>,</span></span>
<span class="r-in"><span>type <span class="op">=</span> <span class="st">"expansion"</span>,threshold <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Detect patches of "celltype_B" cells</span></span></span>
<span class="r-in"><span><span class="va">pancreasSCE</span> <span class="op">&lt;-</span> <span class="fu"><a href="patchDetection.html">patchDetection</a></span><span class="op">(</span><span class="va">pancreasSCE</span>,</span></span>
<span class="r-in"><span>                             img_id <span class="op">=</span> <span class="st">"ImageNb"</span>,</span></span>
<span class="r-in"><span>                             patch_cells <span class="op">=</span> <span class="va">pancreasSCE</span><span class="op">$</span><span class="va">CellType</span> <span class="op">==</span> <span class="st">"celltype_B"</span>,</span></span>
<span class="r-in"><span>                             colPairName <span class="op">=</span> <span class="st">"expansion_interaction_graph"</span>,</span></span>
<span class="r-in"><span>                             min_patch_size <span class="op">=</span> <span class="fl">20</span>,</span></span>
<span class="r-in"><span>                             expand_by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="plotSpatial.html">plotSpatial</a></span><span class="op">(</span><span class="va">pancreasSCE</span>, </span></span>
<span class="r-in"><span>            img_id <span class="op">=</span> <span class="st">"ImageNb"</span>, </span></span>
<span class="r-in"><span>            node_color_by <span class="op">=</span> <span class="st">"patch_id"</span>,</span></span>
<span class="r-in"><span>            scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="minDistToCells-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Distance to celltype_B patches</span></span></span>
<span class="r-in"><span><span class="va">pancreasSCE</span> <span class="op">&lt;-</span> <span class="fu">minDistToCells</span><span class="op">(</span><span class="va">pancreasSCE</span>,</span></span>
<span class="r-in"><span>                             x_cells <span class="op">=</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">pancreasSCE</span><span class="op">$</span><span class="va">patch_id</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Pos_X"</span>,<span class="st">"Pos_Y"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             img_id <span class="op">=</span> <span class="st">"ImageNb"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="plotSpatial.html">plotSpatial</a></span><span class="op">(</span><span class="va">pancreasSCE</span>,</span></span>
<span class="r-in"><span>            img_id <span class="op">=</span> <span class="st">"ImageNb"</span>,</span></span>
<span class="r-in"><span>            node_color_by <span class="op">=</span> <span class="st">"distToCells"</span>,</span></span>
<span class="r-in"><span>            scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="minDistToCells-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nils Eling.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

